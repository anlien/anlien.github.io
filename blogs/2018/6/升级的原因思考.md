### 升级前遇到的点
升级一般认为要解决性能、效率、展示效果和打包策略等问题，但根据个人经验过往经验，其实很多都说噱头。
有些想要解决的点是哪些呢？

#### 性能
刚入职时，让解决浏览器渲染问题和load时间问题，那时觉得defer不是问题，问题在js代码的解析问题中，解析需要修改js和打包策略。
但，还没修改代码，详情页的性能已经升了一截，回头看代码，发现把DNS解析时间减少，页面首页展示就快了一倍。
同样的电脑，同样的网络，同样的代码，性能快了一倍！性能问题，不只是代码的问题！！
当然，这个测试是在chrome上面，并不能说明其他机型的问题。从一个侧面来看，解决性能的问题，不能仅仅盯着网站上的逻辑。

接触过下拉加载dom，dom可达千条，刷到底部时真的好卡。那几千行的dom，是否可以接受呢？减少js、css 和不必要的html很有必要。

现在的pc、移动端和之前几年前做对比时，是否有质的差别？4年前大家用5s的多，现在呢？8plus还是6s呢？
都说要解决性能的问题，说dom的渲染树，可又有多少人了解渲染树呢？上来就说dom的渲染成本很高，可小时候提的一袋米很重，并不代表现在提时也很重。时代在变，浏览器在成长，而观念变了吗？亲，之前是2G，后来是3g，现在是4G，马上就要5G了。

cpu从i3升到i7。。。其实纠结的，只是你在纠结而已。有些只是小众，是不会上网的。上网的，那个不用个好点的手机呢？


#### 为什么要升级
和同事聊天，说的最多的莫过于前后端分离、配置路由、优化代码等几项。说白了，常用的也就这几项。但，前后端能分离吗？在上一家公司，分为前端、后端、运维、app、运营、测试等，前端只管理自己的静态代码，开发时和后端对接口即可。这样的开发效率是高了，但也带来了安全隐患。有些页面，有些涉及到用户信息、获得奖品的接口，有时经常被攻击，运维熬夜整着怎么防御，如何设定防御策略。有时想，我们开发能解决这些问题吗？我想有的。

其实，前端开发的代码，在web端时，服务器是后端；若在app端，则可将app作为一级后端，服务器作为二级后端。代码分清在哪运行的，可以制定不同的策略。在app端的代码，可以倚重app端，然后让app端与后端进行交互。经历了两家公司，app端迭代速度都很快，有时web端需要等待app端发版。在上家公司，有些app的功能，就是使用js和css写的，他们可以用我们的，我们也可以用他们的。代码融入两端，并不一定增加太多的代码量。

前后端分不开，网站本身就由前后端一起组成的，修改的只是交互的方式和提升可维护性。我相信的是，不论哪种代码都有可维护性和友好的交互。

刚开始入职的时候，都说jquery好，那时候动不动就说网站是使用jQuery写的；那时的前端貌似没有人说jQuery的不好和不可维护。php代码，那几年还想着学来着，因为他们说是最好的语言。可，这两种方式一组合，为什么现在人人想改呢？上家公司从php改为java，这家公司改接口。
不想，前端只呆在静态资源里。若有一个为资源服务的服务器，那将是最好不过的。

都是说从易维护性说的，建项目时页考虑了很多，但代码迭代后，为什么人人想升级呢？谁能说的清几年后会用什么框架呢？那时的思维会变成什么样呢？那时是否会否定现在呢？框架的易用性，多人维护到后期，会成为现在的代码吗？

### 升级后解决的点
从前几年到现在，实质上是前端的发展，已经发展到需要团队合作。早几年的代码都是某一个人进行升级与维护的。那时一个功能只需要一个人人，或者少量的几个人分功能模块来维护，代码是以功能块为单位的，编写和维护一般都依赖于某个人，或者某一批人。代码里面的js、css、html，若其他人使用则，需要通读代码，然后才能使用或维护。而通常，重写比维护好使。
那时一般会使用jQuery组件来实现通用。但痛点还有，例如使用一个组件，你的引入很大的css、js、html，然后再根据逻辑来进行配置。再或者，你通读源码后，自己来完成功能。可能使用一个tap，就得引入jquery ui库。
后来node的出现，衍生出commondjs、require.js,前端开始使用异步cmd、Amd。接着协作github出现,带来多人协助写一个工程。当然和vss对比的话，vss只是组内使用的，大家知道就好，而github是全球的，不认识你的人也在维护你的代码，你的让他们读懂你的语言，帮你维护，自己几个人认识这些代码有何用。
规范一直在出，css、js代码规范一直在演进，例如《js语言精粹》就是一本js代码风格的书，xLine来检查js、css、html代码等，规范化与更好的协助一直在路上。

而现在我们要解决的仅仅是性能上的问题吗？很多问题不需要升级框架就能解决，升级不是必须的。当无法维护时，升级是必然的，但这中间的问题，不值得思考吗？

框架一直在演进，语言也一直在升级。php和jquery编写的项目，不如node和react编写的项目？我想你的答案也是否定的，可以说耦合太重，逻辑交叉太多，没有哪个不如哪个。现在的webpack、react、react-route等，过几年呢？谁有知道我们这批人的接班人，会如何把我们的代码干掉！

我们要解决问题，但要想好解决哪些问题。我先说不是解决框架问题。框架没问题，是换了人框架不易维护或没法维护(逻辑不熟)。我们使用前端的代码，换了人也可以维护。
我们要解决协作问题、代码复用问题、开发效率问题、解决问题的能力等。这个网站开发这么多年，多少遇到了不同的问题。每次开发时，可能会遇到相同的问题，测试一个网页有些是必然会关注的，例如禁止滚动、验证、交互效果等。干的年限越多，就得积累的越多，开发时可以利用的也就也多。

如何发挥大家的能力，让大家应对遇到过的问题，游刃有余。让开发有参考解决的方法，参考时也让之前的方法迎来升级的机会，让人从生产中解放出来，对自身技术和公司的技术进行强化，再强化。一个项目不依赖于某一个人，每个人都可以这个框架中独挡一面或者几面，轻松而没压力。算法与交互，在开发中升级，而不是刻意故意升级。解放生产力，让一切变得高效。


### 要发挥的点

开发中，遇到的实际问题可能是多种的，但有些是相似的，如何让这些相似都变为可升级或和复用的点呢？
在这家公司，看到最多的也就是优化、再优化。优化时，很多逻辑是可复用的，或者是需要删除的。如何简单的使用和移除这些代码呢？
编写组件时，很多时候组件是相同的，但显示的组件不同，很多的样式相同但所在容器不同。不论组件还是js代码块，让这些可变的，变为可组的；让着些功能变为增删的；让功能变为通用的。这需要尝试。

想尝试的方案：
1.组件显示的样式不同。让样式变为可覆盖的或可赋值的方法。
2.组件通用性复用
  * 组件里的控制组件的显示和jsx组织，逻辑提到一个js中，在这个js中对action、逻辑进行控制。执行逻辑在js中，组件里控制数据，调用js方法执行逻辑。若对逻辑进行更改时，只需新建js，js继承原来的js，然后将组件中引入的js变为新的js，组件可以不变。这样可以将相关逻辑基础化和抽象话。若组件和js逻辑都可继承，组件和逻辑的更改对组件的整体影响不大。而多余的代码，通过打包工具移除不适用的js方法。
3.功能组织
  在代码块中划分一个目录为功能组块。一个网站对一个功能进行升级和维护，一般是整体性的。例如对周边城市、热门城市等。若在功能块变为可配置的，而无配置的功能块将不进行打包，这样一个网站可以对组件进行组装的。
  组件的可组，而功能块中的组件也可组。在页面新增的功能，在功能文件中进行维护，在不同的组件进行引用。例如一个活动块的引入，在某一期活动是这样的，在另一期又是那样的，若在入口中存入接口，那么有活动时，接入是否也很方便？
  组件中的js只是基础，继承维护后，将引入调整即可移除之前的功能块。其实有些功能只是一段时间的，过了一段时间，通过调整引入的组件，即可完成功能的重组。
  一个功能组价的组织方式：
   components   ----通用组件
     |___ asset ----静态资源
     |___ component.js  --- 组件的相关逻辑
     |___ component.scss -- 组件的样式

   xComponent  -------功能块中的组件
   	 |_____asset ----存放组件的资源
     |  |__base
     |  |__name
     |  |__rName 
   	 |_____base   ---组件的基础功能
	 | 	|__index.js ---js+jsx,并保留___留相关占位符
	 |	|__base.js ---逻辑__实现基础逻辑,抽象的需要多次调整
	 |	|__base.scss ---基础css__可覆盖
	 |_____ex_base_name
	 |	|___ index.js       ---- extents base/index.js 可以扩展
	 |	|___ base_name.js   ---- extents base/base.js
	 |	|___ base_name.scss ---- extents base/base.scss	 
	 |_____ex_name_rName
	    |___ index.js      extends ex_base_name/base_name.js
	    |___ name_rName.js extends ex_base_name/base_name.js
	    |___ name_rName.js extends ex_base_name/base_name.scss
	关于组件的变量写在组建立，js中提出通用。
	当然有些是不确定的和不可控的，有些需要不断的修改，但大的方向需要制定下。通过继承，可以调用，而不必加条件判断。让组件来完成相关功能，而不是在代码块中。有些可以使用css、组件来完成相关的功能。
	需要尝试-----2018.5.17
