### node渲染的架子
在我们公司使用的框架，使用babel和webpack编译。babel编译的在node端使用，webpack编译的在client中使用。框架没有问题，使用起来也挺好的，现在也一直在使用。


在维护公司项目的时候，遇到几个点感觉有点不爽：
* 1.项目的react组件中不能使用图片，只能在scss中使用图片。组件中使用的都是线上的图片
* 2.css全部打包在一个文件中
* 3.js共用组件的需要提前加载

有时个人也会觉得：
* 1.项目中不能使用图片。维护至今也没发现毛病
* 2.本来就是单页，使用一个css没毛病的。
* 3.js打在一起，初始有点慢，但切换页面会后也会快的

其实这些也是事：
* 项目组件中不能使用图片，只能在scss中使用图片的问题。若新增页面，图片都需要提前上传。
* css打包在一起有一个致命的缺陷：css动一点，部署后，重新打开页面，整个css就要重载。依据现在我们公司的发版节奏，css被修改的概率为100%，换句话说，客户端的css缓存基本无效。
* js打在一起：在共用文件下增加一个或改动一点，部署后重新打开页面时，整个js就要重载。其次，js不是按需加载。

### 解决的办法
理想的框架是能实现的。为了找到好的解决方法，就参考nextjs框架和服务端渲染。

解决思路
* 1.css按组件进行打包编译——————实验
* 2.服务端改为webpack渲染——————实验
* 2.使用react-router 按需加载————实验
* 3.在node端渲染编译后的文件

遇到的问题：

* 1.服务端需要重新编译静态资源(图片)
* 2.服务端将编译后的css没有导出，但css还是编译了
* 3.模块的划分问题

正在解决中.....

#### 技术栈
* "react": "^16.6.3"
* "react-router": "^4.3.1"
* "react-loadable": "^5.5.0"
* "koa": "^2.6.2"





